@model IEnumerable<TimeAide.Models.ViewModel.UserInformationViewModel>
@using TimeAide.Common.Helpers;



<div class="form-horizontal" style="padding:20px">

    @Html.Partial("_CreatePageTitleView")


    <div class="form-group row" style="margin-left: 0px !important; margin-right: 0px !important;">


        <div class="table-responsive">
            <table class="table table-striped custom-table table-nowrap mb-0" id="GlobelEmployeeUsertble">
                <!--<table class="datatable table table-striped table-nowrap mb-0">-->
                <thead>
                    <tr>
                        <th>Action</th>
                        <th>
                            EmployeeID
                        </th>
                        <th>View</th>
                        <th>Status</th>
                        @*<th>


                                SystemID
                            </th>*@

                        <th>

                            FirstName
                        </th>

                        <th>
                            LastName
                        </th>
                        <th>

                            Company
                        </th>
                        <th>
                            Department
                        </th>
                        <th>
                            SubDepartment
                        </th>
                        <th>
                            EmployeeType
                        </th>
                        <th>
                            Position
                        </th>
                        <th>
                            Login Email
                        </th>
                        <th>
                            Role
                        </th>
                        <th>
                            Employee Groups
                        </th>


                    </tr>
                </thead>
                @foreach (var item in Model)
                {
                  


                    <tr>
                        <td class="text-left">

                            <div class="dropdown dropdown-action">
                                <a href="#" class="action-icon dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="material-icons">more_vert</i></a>
                                <div class="dropdown-menu dropdown-menu-right" x-placement="bottom-end" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(38px, 32px, 0px);">
                                    <a class="dropdown-item" href="/UserInformation/Details/@item.EncryptedId" onclick="SelectCompanyByGlobalEmployeeSearch(@item.CompanyId)"><i class="fa fa-eye m-r-5"></i> Record</a>
                                    <a class="dropdown-item" href="/UserInformation/EmployeeProfile/@item.EncryptedId" onclick="SelectCompanyByGlobalEmployeeSearch(@item.CompanyId)"><i class="fa fa-user-circle m-r-5"></i> Profile</a>
                                    <a class="dropdown-item" href="/UserDashboard/MyDashboard/@item.EncryptedId" onclick="SelectCompanyByGlobalEmployeeSearch(@item.CompanyId)"><i class="la la-user m-r-5"></i> Self Service</a>
                                </div>
                            </div>
                        </td>

                        <td>
                            <a href="/UserInformation/Details/@item.EncryptedId" onclick="SelectCompanyByGlobalEmployeeSearch(@item.CompanyId)" title="View Record"> @Html.DisplayFor(modelItem => item.EmployeeId)</a>
                            @*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <a href="/UserInformation/EmployeeProfile/@item.Id" title="View Profile"> View Profile</a>*@
                        </td>
                        <td>
                            <a href="/UserInformation/Details/@item.EncryptedId" onclick="SelectCompanyByGlobalEmployeeSearch(@item.CompanyId)" title="Edit Record">Edit</a>
                            |
                            <a href="/UserInformation/EmployeeProfile/@item.EncryptedId" onclick="SelectCompanyByGlobalEmployeeSearch(@item.CompanyId)" title="View Profile"> Profile</a>
                        </td>
                        <td>
                            <span class="badge @item.EmpStatusBgClass">@item.EmployeeStatusName</span>
                        </td>
                

                        <td>
                            @Html.DisplayFor(modelItem => item.FirstName)
                        </td>

                        <td>
                            @item.LastName
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.CompanyName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.DepartmentName)
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.SubDepartmentName)
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.EmployeeTypeName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.PositionName)
                        </td>
                        <td>
                            <span>@item.LoginEmail</span>

                            @*@{
                                var activeusercontactinformation = timeaide.services.userinformationservice.getactiveusercontactinformation(item.id);
                            }
                            @if (activeusercontactinformation != null && !string.isnullorempty(activeusercontactinformation.loginemail))
                            {
                                <span>@activeusercontactinformation.loginemail</span>
                            }*@
                        </td>
                        <td>
                            @item.UserRole

                            @*@TimeAide.Web.Extensions.UserManagmentService.GetUserRole(item.Id)*@

                        </td>
                        <td>
                            @item.EmployeeGroups

                            @*@TimeAide.Web.Extensions.UserManagmentService.GetUserEmployeeGroups(item.Id)*@

                        </td>
                    </tr>
                }




            </table>
        </div>


    </div>

    <div class="submit-section">

        <button type="button" class="btn btn-primary submit-btn" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>Close</button>
    </div>

</div>

<script>
    $(document).ready(function () {
        debugger;
        $('#GlobelEmployeeUsertble').dataTable({
            "searching": true,
            scrollX: true,
            "dom": "ftip"
        });
        //var filterStatus = $("#IsFilteredApplied").val();
        //if (filterStatus == "True") {
        //    $("#divResetFilter").removeClass("hideFilter").addClass("showFilter");
        //}
        //else {
        //    $("#divResetFilter").removeClass("showFilter").addClass("hideFilter");
        //}
    });
</script>
<style>
    .dataTables_wrapper .dataTables_filter {
        width: 100%;
        text-align: center;
    }

    .modal-dialog {
        width: 70%;
        max-width: 70% !important;
    }

    .submit-btn {
        text-align: center;
        margin-top: 40px;
    }
</style>

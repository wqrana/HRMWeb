
<div class="mt-2 p-1">
    <div class="alert alert-primary" style="text-align:center;background-color: #00c5fb;border: 1px solid #00c5fb;">
        <h4 style="display: inline;">Credential Selection</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
        </button>
    </div>
    <hr>
</div>
<div class="modal-body pt-0">

    <div class="alert" style="display:none;" id="CredentialSelectionPopUpAlert">
        <a href="javascript:void(0)" class="close" id="alertDismiss">&times;</a>
        <strong>Alert!</strong><span class="ml-1"></span>
    </div>
    <div class="row">

        <div class="col-md-12">
            <div class="form-group row">
                <label class="col-md-2 col-form-label">Position: <span class="text-danger"></span></label>
                <div class="col-md-6 text-muted mt-2">
                 @ViewBag.PositionName    
                </div>              
            </div>
            <div class="form-group row">
                <label class="col-md-2 col-form-label">Credential: <span class="text-danger">*</span></label>
                <div class="col-md-8 pr-0">
                    @Html.DropDownList("CredentialSelectionId", null, "Please Select", new { @class = "form-control" })
                </div>
                <label class="col-md-1 col-form-label">All: <span class="text-danger"></span></label>
                <div class="col-md-1 mt-2">
                    @Html.CheckBox("ChkAllCredentialList", false)
                </div>
            </div>
        </div>
    </div>
    <div class="submit-section mt-1">

        <button id="btnSelectCredential" class="btn btn-primary submit-btn">Ok</button>
        <button id="btnCancel" class="btn btn-primary  submit-btn" data-dismiss="modal" aria-label="Close">Cancel</button>
    </div>

</div>
@*</div>
        </div>
    </div>*@

<script>
    $(document).ready(function () {
        $("#ChkAllCredentialList").click(function () {
            debugger;
            var isChecked = $(this).is(":checked");
            var dropdownElementId = "#CredentialSelectionId";
            ajaxLoadCredentialSelectionDropdown(dropdownElementId, isChecked);
        });
        $("#btnSelectCredential").click(function () {
            debugger;
            var CredentialId = $("#CredentialSelectionId").val();
            if (CredentialId == null || CredentialId == "") {
                showAlertAutoHide('#CredentialSelectionPopUpAlert', 'Error', "Please Select the Credential");
                return;
            }
            setSelectedCredential(CredentialId);
        });
    });

    function ajaxLoadCredentialSelectionDropdown(ddlElmentId, isAllMasterData) {
        debugger;
        var id = $('#userID').val();
        $.ajax({
            url: '/EmployeeCredential/AjaxGetCredentialList',
            data: {
                'id': id,
                'isAllMasterData': isAllMasterData
            }, //dataString,
            dataType: 'json',
            type: 'GET',
            success: function (res) {
                debugger;
                var data = res;

                $(ddlElmentId + ' option').remove();
                var option = '<option value=""> Please Select </option>';
                $(ddlElmentId).append(option);
                $(data).each(function () {
                    var option = '<option value=' + this.id + '>' + this.text + '</option>';
                    $(ddlElmentId).append(option);
                });


            },
            error: function (xhr, status, error) {
                alert("Error ajaxLoadCredentialSelectionDropdown");
            }
        });
    }
    function setSelectedCredential(credentialId) {
        $("#CredentialId").val(credentialId);
        $("#divDdlPopup").modal("hide");
    }
</script>



